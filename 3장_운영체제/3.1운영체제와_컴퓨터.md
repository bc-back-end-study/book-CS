# 3장. 운영체제

Created: 2022년 10월 31일 오후 8:22
Last Edited Time: 2022년 10월 31일 오후 9:04

# 3. 운영체제

운영체제(Operating System) 은 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스

펌웨어는 OS와 유사하지만, 소프트웨어를 추가로 설치할 수 없는 것.

## 3.1 운영체제와 컴퓨터

### 3.1.1 운영체제의 역할과 구조

- 운영체제의 역할
    - CPU 스케줄링과 프로세스 관리
        - CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원할당 및 반환을 관리
    - 메모리 관리
        - 한정된 메모리를 어떤 프로세스에 얼만큼 할당해야 하는지 관리
    - 디스크 파일관리
        - 디스크 파일을 어떠한 방법으로 보관할지 관리
        
    - I/O 디바이스 관리
        - 키보드, 마우스와 컴퓨터 간의 데이터를 주고 받는 것을 관리함.

**운영체제의 구조**

![스크린샷 2022-10-31 오후 8.34.43.png](3%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%AE%E1%86%AB%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%8E%E1%85%A6%E1%84%8C%E1%85%A6%20102179cf12be4663b121730d954d587a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2022-10-31_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.34.43.png)

GUI 대신 CUI만 있는 리눅스 서버도 존재한다.

ec2서버나 GCP 인스턴스 생각해보자!

> 시스템콜
> 

운영체제가 커널에 접근하기 위한 인터페이스

유저모드에서 커널모드로 뭔가의 작업을 수행하려면 이 시스템콜을 호출해야 한다.

```java
public class Demo {
    public static void main(String[] args) throws IOException {
        // 로직 수행중...
        FileReader fr = new FileReader("hello.txt");
        fr.read();
    }
}
```

로직을 수행중에 위에 구현한 `FileReader.read()` 를 사용하는 순간에

유저모드에서 파일을 읽어와야 하는 IO 작업이 수행되기 때문에 유저모드에선 할 수 없어서

바로 시스템콜을 호출한다. 그 후 커널모드로 진입하여 실행된 후에 다시 유저모드로 전환해서 남은 로직을 수행한다.

이런식으로 구성되면, 컴퓨터 자원에 대한 직접 접근을 차단할 수 있고, 프로그램을 다른 프로그램으로부터 보호할 수 있다.

시스템콜은 하나의 추상화 계층이기에, 이를 통해 네트웍 통신이나 DB 와 같은 낮은 단계의 영역 처리 부분에서 신경을 쓰지 않고 프로그램을 구현할 수 있다는 장점이 존재한다.

> 모드비트
> 

이 모드비트를 참고해서 시스템콜이 작동될 때 유저모드와 커널모드를 구분한다.

모드 비트 → 플래그

0은 커널모드, 1은 유저모드

입출력 디바이스는 운영체제를 통해서만 작동해야 한다.

유저모드로 여러 프로그램을 막 켤 수 있다면, 공격자가 바로 켤수 있다는 뜻이다.

**운영체제를 통해 프로그램을 작동하게 하자!**

### 3.1.2 컴퓨터의 요소

![스크린샷 2022-10-31 오후 8.49.09.png](3%E1%84%8C%E1%85%A1%E1%86%BC%20%E1%84%8B%E1%85%AE%E1%86%AB%E1%84%8B%E1%85%A7%E1%86%BC%E1%84%8E%E1%85%A6%E1%84%8C%E1%85%A6%20102179cf12be4663b121730d954d587a/%25E1%2584%2589%25E1%2585%25B3%25E1%2584%258F%25E1%2585%25B3%25E1%2584%2585%25E1%2585%25B5%25E1%2586%25AB%25E1%2584%2589%25E1%2585%25A3%25E1%2586%25BA_2022-10-31_%25E1%2584%258B%25E1%2585%25A9%25E1%2584%2592%25E1%2585%25AE_8.49.09.png)

- CPU
    - 산술논리연산장치 (ALU), 제어장치, 레지스터로 구성된 컴퓨터 장치
    - 인터럽트에 의해 메모리에 존재하는 명령어를 해석해서 실행
    - 제어장치
        - 프로세스 조작을 지시하는 CPU의 하나
        - 입출력 장치 간 통신을 제어하고 데이터 처리를 위한 순서 결정
    - 레지스터
        - CPU 안에 있는 매우 빠른 임시기억장치
        - 연산속도가 메모리보다 수십~수백 배 빠름
        - CPU 자체적으로 데이터를 저장할 방법이 없어 이 부품을 거쳐 데이터를 전달
    - 산술논리 연산장치
        - ALU는 덧셈, 뺄셈 같은 두 숫자의 산술 연산, 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로

> 인터럽트
> 

CPU는 하나의 작업만 수행할 수 있는데,

하나의 작업을 진행하다가 이 신호가 들어오면 현재 작업중이던 것을 저장해두고, 신호가 들어온 작업을 처리한다.

인터럽트 간에는 우선순위가 존재하고, 그에 따라 실행되며

하드웨어 인터럽트와 소프트웨어 인터럽트가 있다.

- 하드웨어 인터럽트
    - IO 디바이스에서 발생하는 인터럽트
- 소프트웨어 인터럽트
    - 트랩이라고도 함.
    - 프로세스 오류 등으로 프로세스가 시스템콜을 호출할 때 발동

> DMA 컨트롤러
> 

IO 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치

CPU가 이 입출력에 해당하는 작업도 수행하게 되면 너무 많은 인터럽트 요청이 들어오기에 CPU 부하를 막아주고, 그 일을 부담하는 보조적인 장치이다.

하나의 작업을 CPU와 동시에 하는 것을 방지

> 메모리
> 

데이터나 상태, 명령어를 기록하는 장치

RAM을 일컬어 메모리라고도 한다. CPU는 계산을 담당하고, 메모리는 기억을 담당

메모리가 크면 동시에 많은 일을 수행할 수 있다.

> 디바이스 컨트롤러
> 

디바이스 컨트롤러는 컴퓨터와 연결된 IO 디바이스들의 작은 CPU를 말함